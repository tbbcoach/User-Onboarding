/**
 * Created by aesop on 2016/1/31.
 */
'use strict';

const part = require('./os').partedSymbol;
const fs = require('fs');
const path = Object.create(require('path'));

const listFiles = path.listFiles = (dir = '.') => {
  let arr = [];
  if (fs.lstatSync(dir).isDirectory()) {
    fs.readdirSync(dir).forEach((fileName) => {
      const fullName = path.join(dir, fileName);
      arr = arr.concat(listFiles(fullName));
    });
    return arr;
  }
  return [path.normalize(dir)];
};

path.toOsSpecifiedPath = old => old.replace(/\//g, part).replace(/\\/g, part);

path.toWebPath = old => `/${old.replace(/\\/g, '/')}`;

module.exports = path;

