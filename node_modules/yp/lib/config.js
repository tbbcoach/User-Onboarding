/**
 * Created by yuji on 10/29/15.
 */

'use strict';
const os = require('./os');
const path = require('./path');

class Config {
  constructor() {
    Object.assign(this, {
      outdir: 'dist',
      rootPath: '.',
      mapJsonPath: 'dist/map.json',
      logdir: os.usualLogDir,
      logLevel: 0,
      leaveFileLog: false,
    });
  }

  get rootPath() {
    return this._rootPath;
  }

  set rootPath(p) {
    this._rootPath = path.toOsSpecifiedPath(p);
  }

  get mapJsonPath() {
    if (path.isAbsolute(this._mapJsonPath)) {
      return this._mapJsonPath;
    }
    return path.join(this.rootPath, '..', this._mapJsonPath);
  }

  set mapJsonPath(p) {
    this._mapJsonPath = path.toOsSpecifiedPath(p);
  }

  setConfig(config) {
    Object.assign(this, config);
  }
}


module.exports = new Config();
